This version is patched for "trap ERR" (provided by Sami Kerola).
